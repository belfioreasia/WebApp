{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-765947a0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"page-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \" Your Crohn's Disease Genetic Score \", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  key: 0\n};\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = {\n  for: \"fileInput\",\n  class: \"drop-instructions\"\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"u\", null, \"click to upload\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  key: 0,\n  class: \"preview-file\"\n};\nconst _hoisted_10 = {\n  class: \"preview-card\"\n};\nconst _hoisted_11 = {\n  key: 3\n};\nconst _hoisted_12 = {\n  class: \"toggle-lists-footer\"\n};\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"inside-toggle-list\"\n}, [/*#__PURE__*/_createElementVNode(\"p\", null, [/*#__PURE__*/_createTextVNode(\" We can analyse Genome Sequencing files in VCF format. \"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createTextVNode(\" We accept gzipped .vcf files (.vcf.gz) and .txt files. \")])], -1 /* HOISTED */));\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"inside-toggle-list\"\n}, [/*#__PURE__*/_createElementVNode(\"p\", null, \" Crohn's disease has a complex etiology resultin.\")], -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_ToggleList = _resolveComponent(\"ToggleList\");\n  const _component_AlertPopup = _resolveComponent(\"AlertPopup\");\n  const _component_ResultTab = _resolveComponent(\"ResultTab\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"p\", null, [_createTextVNode(\" Use our \"), _createVNode(_component_router_link, {\n    to: \"/our-research\",\n    class: \"link\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" Neural Network \")]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\" to predict your Genetic Risk of developing Crohn's Disease \")]), !$data.file_uploaded ? (_openBlock(), _createElementBlock(\"h4\", _hoisted_3, \" Upload your file here: \")) : $data.file_uploaded ? (_openBlock(), _createElementBlock(\"h4\", _hoisted_4, \" Your Results: \")) : _createCommentVNode(\"v-if\", true), !this.file_uploaded ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 2,\n    class: \"drop-area\",\n    onDragover: _cache[2] || (_cache[2] = (...args) => $options.dragover && $options.dragover(...args)),\n    onDragleave: _cache[3] || (_cache[3] = (...args) => $options.dragleave && $options.dragleave(...args)),\n    onDrop: _cache[4] || (_cache[4] = (...args) => $options.drop && $options.drop(...args))\n  }, [_createElementVNode(\"input\", {\n    class: \"hidden\",\n    name: \"file\",\n    id: \"fileInput\",\n    ref: \"file\",\n    type: \"file\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.uploadFile && $options.uploadFile(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), _createElementVNode(\"label\", _hoisted_5, [$data.isDragging ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \" Drop file here. \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createTextVNode(\" Drop file here or \"), _hoisted_8, _createTextVNode(\". \")]))]), this.file && !this.file_uploaded ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", null, [_createElementVNode(\"p\", null, _toDisplayString(this.file.name), 1 /* TEXT */)])])])) : _createCommentVNode(\"v-if\", true), this.file && !this.file_uploaded ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    class: \"btn\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.postToBackend && $options.postToBackend(...args))\n  }, \" Upload \")) : _createCommentVNode(\"v-if\", true)], 32 /* NEED_HYDRATION */)) : _createCommentVNode(\"v-if\", true), !$data.file_uploaded ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"p\", null, [_createTextVNode(\" Or try our services with \"), _createElementVNode(\"button\", {\n    class: \"btn\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.testRun && $options.testRun(...args)),\n    style: {\n      \"height\": \"5vg\",\n      \"width\": \"10vw\"\n    }\n  }, \" TEST DATA \")]), _createElementVNode(\"div\", _hoisted_12, [_createVNode(_component_ToggleList, {\n    title: \"Is my file in the right format?\",\n    index: 0,\n    width: 20\n  }, {\n    default: _withCtx(() => [_hoisted_13]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_ToggleList, {\n    title: \"What happens to my data?\",\n    index: 1,\n    width: 20\n  }, {\n    default: _withCtx(() => [_hoisted_14]),\n    _: 1 /* STABLE */\n  })])])) : _createCommentVNode(\"v-if\", true), $data.is_waiting ? (_openBlock(), _createBlock(_component_AlertPopup, {\n    key: 4,\n    class: \"alert\",\n    type: \"loading\"\n  })) : _createCommentVNode(\"v-if\", true), $data.show_alert ? (_openBlock(), _createBlock(_component_AlertPopup, {\n    key: 5,\n    class: \"alert\",\n    onClose: $options.closeAlert,\n    type: \"alert\"\n  }, null, 8 /* PROPS */, [\"onClose\"])) : _createCommentVNode(\"v-if\", true), $data.file_uploaded && !$data.show_alert ? (_openBlock(), _createBlock(_component_ResultTab, {\n    key: 6,\n    class: \"result-tab\",\n    score: this.disease_result,\n    snp_list: this.user_mutations\n  }, null, 8 /* PROPS */, [\"score\", \"snp_list\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","for","_createTextVNode","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_router_link","to","default","_withCtx","_","$data","file_uploaded","_hoisted_3","_hoisted_4","_createCommentVNode","onDragover","_cache","args","$options","dragover","onDragleave","dragleave","onDrop","drop","name","id","ref","type","onChange","uploadFile","_hoisted_5","isDragging","_hoisted_6","_hoisted_7","_hoisted_8","file","_hoisted_9","_hoisted_10","_toDisplayString","onClick","postToBackend","_hoisted_11","testRun","style","_hoisted_12","_component_ToggleList","title","index","width","_hoisted_13","_hoisted_14","is_waiting","_createBlock","_component_AlertPopup","show_alert","onClose","closeAlert","_component_ResultTab","score","disease_result","snp_list","user_mutations"],"sources":["/Users/asiabelfiore/Desktop/WebApp/frontend/src/views/PredView.vue"],"sourcesContent":["<!-- eslint-disable -->\n<template>\n  <div class=\"page-container\">\n    <h1> Your Crohn's Disease Genetic Score </h1>\n    <p> Use our \n      <router-link to=\"/our-research\" class=\"link\"> Neural Network </router-link> \n      to predict your Genetic Risk of developing Crohn's Disease\n    </p>\n    <h4 v-if=\"!file_uploaded\"> Upload your file here: </h4>\n    <h4 v-else-if=\"file_uploaded\"> Your Results: </h4>\n      <div class=\"drop-area\"  v-if=\"!this.file_uploaded\"\n          @dragover=\"dragover\"\n          @dragleave=\"dragleave\"\n          @drop=\"drop\">\n            <input class=\"hidden\" name=\"file\" id=\"fileInput\" ref=\"file\" type=\"file\"\n                   @change=\"uploadFile\"/>\n            <label for=\"fileInput\" class=\"drop-instructions\">\n              <div v-if=\"isDragging\"> Drop file here. </div>\n              <div v-else> Drop file here or <u>click to upload</u>. </div>\n            </label>\n            <div class=\"preview-file\" v-if=\"this.file && !this.file_uploaded\" >\n                <div class=\"preview-card\" >\n                    <div>  <p> {{ this.file.name }} </p> </div>\n                </div>\n            </div>\n            <button class=\"btn\" @click=\"postToBackend\" v-if=\"this.file && !this.file_uploaded\" > Upload </button>\n        </div>\n    <div v-if=\"!file_uploaded\">\n    <p> Or try our services with <button class=\"btn\" @click=\"testRun\" style=\"height: 5vg; width: 10vw;\"> TEST DATA </button></p>\n       <div class=\"toggle-lists-footer\"> \n          <ToggleList title=\"Is my file in the right format?\"\n                      :index=\"0\"\n                      :width=\"20\" >\n                        <div class=\"inside-toggle-list\">\n                          <p> We can analyse Genome Sequencing files in VCF format. \n                            <br> We accept gzipped .vcf files (.vcf.gz) and .txt files. </p>\n                        </div>\n                    </ToggleList>\n          <ToggleList title=\"What happens to my data?\"\n                    :index=\"1\"\n                    :width=\"20\">\n                      <div class=\"inside-toggle-list\">\n                        <p> Crohn's disease has a complex etiology resultin.</p>\n                      </div>\n                  </ToggleList>\n       </div>\n    </div>\n    <AlertPopup v-if=\"is_waiting\" class=\"alert\" type=\"loading\"/>\n    <AlertPopup v-if=\"show_alert\" class=\"alert\" @close=\"closeAlert\" type=\"alert\"/>\n    <ResultTab v-if=\"file_uploaded && !show_alert\" class=\"result-tab\" :score=\"this.disease_result\" :snp_list=\"this.user_mutations\"/>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport axios from 'axios';\nimport ToggleList from '@/components/ToggleList.vue';\nimport ResultTab from '@/components/ResultTab.vue';\nimport AlertPopup from '@/components/AlertPopup.vue';\n\nconst axiosInstance = axios.create({\n  baseURL: 'http://127.0.0.1:5000/pred', \n  headers: { 'Content-Type': 'multipart/form-data' }\n});\n\n\nexport default {\n  name: \"PredView\",\n  components: {\n    ToggleList,\n    ResultTab,\n    AlertPopup,\n  },\n  data() {\n      return {\n        is_waiting: false,\n        isDragging: false,\n        file: undefined,\n        file_uploaded: false,\n        disease_result: [],\n        user_mutations: [],\n        show_alert: false\n        };\n    },\n    methods: {\n      async postToBackend() {\n        try {\n          const formData = new FormData();\n          formData.append('file', this.file); \n          this.is_waiting = true;\n          const response = await axiosInstance.post('http://127.0.0.1:5000/pred', formData);\n          if (response.data.status == -1) {\n              this.is_waiting = false;\n              console.log(response.data.result);\n              console.log('File not readable.');\n              // POPUP ERROR \n              this.show_alert = true;\n              this.file_uploaded = false;\n              this.file = undefined;\n          } \n          else{\n              this.is_waiting = false;\n              console.log('File uploaded successfully.');\n              this.file_uploaded = true;\n              console.log(response.data.status);\n              this.disease_result[0] = (response.data.result);\n              this.disease_result[1] = (response.data.prs);\n              this.user_mutations = (response.data.user_snps);\n          }         \n        } catch (error) {\n          console.error('Error uploading data.', error);\n          this.file = undefined;\n          this.file_uploaded = false;\n        }\n      },\n\n      async testRun() {\n        try {\n          this.is_waiting = true;\n          const response = await axios.get('http://127.0.0.1:5000/pred-samplefile');\n          if (response.data.status == -1) {\n              this.is_waiting = false;\n              console.log(response.data.result);\n              console.log('File not readable.');\n              // POPUP ERROR \n              this.show_alert = true;\n              this.file_uploaded = false;\n              this.file = undefined;\n          } \n          else{\n              this.is_waiting = false;\n              console.log('File uploaded successfully.');\n              this.file_uploaded = true;\n              console.log(response.data.status);\n              this.disease_result[0] = (response.data.result);\n              this.disease_result[1] = (response.data.prs);\n              this.user_mutations = (response.data.user_snps);\n          }         \n        } catch (error) {\n          console.error('Error uploading data.', error);\n          this.file = undefined;\n          this.file_uploaded = false;\n        }\n      },\n\n      uploadFile(event) {\n        this.file = event.target.files[0];\n      },\n      \n      dragover(e) {\n        e.preventDefault();\n        this.isDragging = true;\n      },\n      \n      dragleave() {\n        this.isDragging = false;\n      },\n\n      drop(event) {\n        event.preventDefault();\n        this.isDragging = false;\n        this.file = event.dataTransfer.files[0];\n      },\n      closeAlert() {\n        this.show_alert = false;\n      },\n    },\n}\n  </script>\n\n<style scoped>\n.page-container {\n  display: flex;\n  flex-direction: column;\n  overflow-y: auto;\n  align-items: center;\n  margin-bottom: 2vh;\n  padding-top: 2vh;\n  height: 100%;\n  background-color: rgb(244, 244, 245, 0.5);\n}\n\nh4 {\n  margin: 2vh 0 1vh 0;\n  font-size: 20px;\n}\n\na, u{\n  color: rgba(125, 33, 103);\n  font-weight: 500;\n  font-style: italic;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.drop-area {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n  align-items: center;\n  \n  margin: 0.8rem;\n  padding: 1rem 2rem 1rem 2rem;\n  border-radius: 25px;\n  height: 30vh;\n  width: 50vw;\n\n  background: rgba(125, 33, 103, 0.03);\n  border: 3px dotted rgba(125, 33, 103, 0.1);\n  box-shadow: 2px 2px 2px 2px rgba(205, 204, 204, 0.3);\n}\n\n#fileInput, .drop-instructions {\n  color: rgb(72, 71, 73);\n  align-self: center;\n  padding: auto;\n  margin: auto;\n  font-size: 15px;\n  cursor: pointer;\n}\n\n.hidden {\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  width: 1px;\n  height: 1px;\n}\n\n.preview-card {\n  display: flex;\n  border: 1px solid rgba(125, 33, 103, 1);\n  background-color: #fff;\n  border-radius: 8px;\n  padding: 0px 20px 0px 20px;\n  margin-left: 5px;\n}\n\n.results-tab {\n  margin: 20px;\n}\n\n.toggle-lists-footer {\n  display: flex;\n  gap: 0.1vw;\n  place-items: flex-start;\n  align-content: center;\n}\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}